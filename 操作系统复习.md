OS 接口
存储器 处理器 I/O、文件
一次仅允许一个进程使用的资源叫做临界资源



**几种系统**

单道批处理系统：内存只有一个用户作业存在
多道批处理系统：内存中有多个用户作业存在
(用户不可以干预自己作业的运行)

分时系统：交互性强

实时系统：在规定的时间内对外界的请求必须给予及时响应

设计现代操作系统的主要目标：（有、方、可、开）
有效性、方便性、可扩充性、开放性

操作系统的特征：（并共虚异）
并行性（同一时间）和并发性（同一时间间隔内）的区别

微内核：微内核把操作系统分成若干分别完成一组特定功能的服务进程，等待客户提出请求（小、客、机、面）
足够小的内核
基于客户、服务器模式
应用“机制与策略分离“原理
采用面向对象技术

程序顺序执行特征：（顺、封、可）
顺序性、封闭性、可再现性
程序并发执行时的特征：（间、失、不）
间断性、失去封闭性、不可再现性
I/O请求 唤醒 
执行、 阻塞、 就绪、 终止
时间片到
**进程调度**（属于处理机管理）

进程控制块PCB：**为了每个程序能够独立的运行，OS为其配置一个专门的数据结构，称为程序控制块，是进程存在的唯一标识**
进程实体：程序段、数据段、PCB
进程定义：进程是程序的一次执行
进程的特征：(动、并、独、异)


进程创建过程：
申请一个空白PCB->为新进程分配资源->初始化PCB->将新进程加入到就绪队列

临界区：是每个进程中访问临界资源的那段代码（作用保证各进程互斥进入自己的临界区）

同步机制：（空、忙、有、让）
有限等待： 一个进程等待资源或条件时，它等待的时间是有限的。
让权等待：当一个进程需要等待资源或条件满足时，它主动释放CPU，进入等待状态

记录型信号量：（默认信号量类型）记录型信号量是由于采用了记录型的数据结构而得名的。
信号量类型：（整、记、AND、集）
1、整型信号量
2、记录型信号量
3、AND型信号量
4、信号量集



![image-20241213093453542](C:\Users\shirinp\AppData\Roaming\Typora\typora-user-images\image-20241213093453542.png)

![image-20241213093507641](C:\Users\shirinp\AppData\Roaming\Typora\typora-user-images\image-20241213093507641.png)





P1(){S1; signal(a); signal(b); }
P2(){wait(a); S2; signal(c); signal(d); }
P3(){wait(b); S3; signal(e);}
P4(){wait(c); S4; signal(f); }
P5(){wait(d); S5; signal(g); }
P6(){wait(e); wait(f); wait(g); S6; }
main(){
semaphore a,b,c,d,e,f,g;
a.value=b.value=c.value=d.value=e.value=0;
f.value=g.value=0;
cobegin
P1();P2();P3();P4();P5();P6();
coend;
}semephore
cobegin
coend

生产者消费者问题：
semaphore mutex=1; //互斥使用取号机
semaphore empty=10; //空座位数量
semaphore full= 0; //已占座位数量
semaphore service=0; //等待服务
cobegin
{process顾客i{
P(empty);
P(mutex);
从取号机获得一个号;
V(mutex);
V(full);
等待叫号；

P(service);//请求服务
获得服务;
}process营业员{
while(TRUE){
P(full);
V(empty) ;

叫号；
V(service); //提供服务
为顾客服务;
}}}coend
类似解法

管程的定义：
代表共享资源的数据结构以及对共享数据结构实施操作的一组过程所组成的资源管理程序共同构成了一个操作系统的资源管理模块

传递信号量较大的应用：（共、管、消、客）简答还要加上信号量机制

线程作为调度和分派的基本单位（进程是资源分配的基本单位）

**一个进程是一个独立的程序**

线程和进程的关系总结：
线程是进程的一个组成部分
资源是分给进程的，而不是线程
处理机调度的基本单位是线程

处理机调度的层次：
**高级调度：又称作业调度、长程调度 主要用于批处理系统**
**中级调度：内存调度 ，存储器管理中的对换功能**
**低级调度：进程调度、短程调度 决定就绪队列中哪个进程应获得处理机，操作系统最核心的部分**

处理机调度算法的目标：（资、公、平、策）
资源利用率：CPU的利用率=
CPU有效工作时间/（ CPU有效工作时间+CPU空闲等待时间）
公平性：
平衡性：
策略强制执行

大题的计算：
周转时间=完成时间-提交时间
带权周转时间=周转时间/运行时间

调度算法：
高响应比优先调度算法
高优先权优先调度算法（**为了照顾紧迫型作业**）

非抢占方式：
一旦把处理机分配给某个进程后，让该进程一直执行，直到该进程完成或者发生某事件而阻塞

抢占方式：允许调度程序根据某种原则，暂停正在执行的进程，将处理机重新分配给其他进程

进程调度算法：
轮转调度算法（分时系统）
优先级调度算法

优先级倒置
高优先级进程（线程）被低优先级进程（线程）延迟或阻塞：共享临界资源，低优先级先进入临界区，倒置高优先级阻塞

死锁的定义：
如果一组进程中的每一个进程都在等待仅由该组进程中的其他进程才能引发的事件，那么该组进程是死锁的

产生死锁的条件：（互、请、不、环）
互斥条件：进程互斥使用资源
请求和保持条件：申请新资源时不释放已占有资源
不剥夺条件：一个进程不能抢占其他进程占有资源
环路等待条件：存在一组进程循环等待资源环形链

预防死锁的基本方法（预、避、检、除）
预防死锁（破坏条件）
避免死锁（不破坏条件）动态分配资源，防止进入不安全状态
检测死锁：检测机制
解除死锁：挂起部分进程，阻塞转就绪

系统安全状态：
系统能够按照某种策略（如银行家算法）分配资源，使得系统中的所有进程都能在有限的时间内得到所需资源并完成任务，不会出现死锁的状态

程序的装入**（绝、可、动）**
绝对装入方式
可重定位装入方式
动态运行时装入方式

基于顺序搜索的动态分区分配算法（首、循环、佳、坏）
首次适应算法
循环首次适应算法
最佳适应算法
最坏适应算法

碎片问题的解决：
连续分配->(解决方式：紧凑), 
离散分配方式->(解决方式：分页)
分页存储方式 ->页
分段存储方式->段  （不会产生内部碎片）
段页存储管理方式->先分段再分页

**分页分段存储管理的区别：**

- 分页：为提高内存利用率，页大小固定，由系统划分，对用户透明，解决内存碎片问题。
- 分段：为满足程序逻辑结构，段长不固定，由用户程序决定，解决程序和数据逻辑关系问题。



页表的作用：
**实现了从页号到物理块号的地址映射**
快表：
存放当前访问的若干个页表项，加快逻辑页到物理块的映射转换
页表是记录完整的进程页表信息，而快表记录进程最近访问的页的信息

大题计算：
分页大小计算：
页面大小=主存/块数
作业长度=页数*页面大小
（根据题目信息）
将具体地址1020
1020/1024=0余 1020 就说明是在0页 偏移1020
物理地址=盘块序号*块大小 +偏移
2*1024+1020

虚拟存储器的定义：
最大容量决定因素：地址结构 外存空间
虚拟存储器每位成本接近于外存

虚拟存储器特征：（多、对、虚）
多次性
对换性
虚拟性

缺页率：（页、物、置、程）
影响因素：页面大小，物理块数、置换算法、程序固有特性

页面置换算法：（最、先、LRU）
最佳置换算法
先进先出算法
LRU最近最久未使用置换算法

抖动：在虚存中，页面在内存与外存之间频繁调度，以至于调度页面所需时间比进程实际运行的时间还多、此时系统效率急剧下降，甚至导致系统崩溃

工作集：
在某段时间间隔里，进程实际所要访问页面的集合

I/O系统的基本功能：（隐、无、提、控、共、错）
隐藏物理设备的细节
与设备的无关性
提高处理机和I/O设备的利用率
对I/O设备进行控制（轮、中、直、通）
轮询可编程IO
中断可编程IO
直接存储器访问
IO通道 
确保对设备的正确共享
错误处理

I/O系统接口：
块设备接口：磁盘、光盘
流设备接口：键盘、打印机
网络通信接口：

I/O设备的类型：
按传输速率分类：低 中 高
按信息交换的单位分类：块 字符
按设备的共享属性分类：独占、共享、虚拟

按传输速率分类低速设备：
键盘：
鼠标：
中速设备：
打印机
扫描仪
高速设备：
CPU
内存
磁盘（特别是固态硬盘 SSD）：
按信息交换的单位分类块设备：
磁盘：
**字符设备：**
键盘：
鼠标：
打印机：
扫描仪：
按设备的共享属性分类
**独占设备：**
打印机
**共享设备：**
磁盘
内存
虚拟设备：
按可剥夺和不可剥夺分类

**可剥夺设备：**
磁盘
内存
**不可剥夺设备：**
打印机：
键盘：
鼠标：




中断向量表：每种设备有自己的中断处理程序，程序入口记录在中断向量表中，并给予不同的中断号和优先级

设备独立性：
应用程序独立于具体使用的物理设备

I/O设备的控制方式（轮、中、DMA、I/O）
轮询I/O控制方式
中断I/O控制方式
DMA控制方式**(直接存储器访问方式，数据传输的基本方式,需要CPU干预最少)**
I/O通道控制方式

LUT逻辑设备表
用于将应用程序中所使用的逻辑设备名映射为物理设备名

磁盘的访问：寻道 旋转 传输

磁盘调度算法：（先、短、扫、循）
先来先服务FCFS
最短寻道时间优先
扫描(SCAN)（电梯调度）算法
循环扫描算法（CSCAN）算法

文件目录：
按名存取

文件类型
按文件的**性质和用途**分为：系统文件，库文件，用户文件
按文件中**数据的形式**分类 ：源文件，目标文件，可执行文件
按**存取控制属性**分类：只执行文件，只读文件，读写文件。
按**组织形式和处理**方式：普通文件，目录文件，特殊文件

文件的逻辑结构：**从用户角度看到的文件的全貌，也就是它的记录结构**
文件的物理结构：**文件在外存上的存储组织形式**

文件控制块（FCB）：**文件控制块（File Control Block，FCB）是操作系统为管理文件而设置的数据结构，它存储了文件的相关信息。**
索引结点：使得文件名与文件信息分开

两级目录：
2. 两级目录 
优点：(提高速度、不同相同、不同不同共享)
(1)提高了检索目录的速度 
(2) 在不同的用户目录中， 可以使用相同的文件名。 
(3) 不同用户还可使用不同的文件名来访问系统中的同一个共享文件 
但是不同用户文件之间的共享成为问题.

保护域：
进程对一组对象访问权的集合，进程只能在指定域内执行操作。

外存的组织方式：（连续、链接、索引）
**连续组织方式**
**链接组织方式:** 为文件分配不连续磁盘空间通过链接指针将文件多有盘块链接在一起
**索引组织方式:**为文件分配不连续磁盘空间，盘块记录采用索引式组织方式

显式链接
FAT(名词解释)：**构建一张链接表，把文件各物理块的指针显示存放**，该表在整个磁盘中仅仅有一张，就是文件分配表FAT

**位图**只适合小型系统
**成组链接法**针对大型文件系统（UNIX系统使用）

FAT技术
在FAT中引入“卷”的概念，支持将物理磁盘分为四个逻辑磁盘，每个逻辑磁盘就是一个卷，也叫分区
一个物理磁盘可以分为多个逻辑卷，一个逻辑卷也可以由多个物理磁盘组成
FAT12位（共1.5B）

NTFS以簇为磁盘空间分配和回收的基本单位，又称为卷因子

提高磁盘I/O速度的途径：（提、延、优、虚、高）
1、**提前读：**操作系统会预测用户程序即将访问的磁盘数据块
2、**延迟写：**当内存中的数据需要写回磁盘时，系统并不立即执行写操作
3、**优化物理块的分布**：操作系统会尽量将相关联的数据块安排在相邻的磁盘位置
4、**虚拟盘**：虚拟盘是利用内存空间来模拟磁盘存储
5、**磁盘高速缓存**：磁盘高速缓存是在内存中开辟一块区域，用于存储近期访问过的磁盘数据块。当程序请求读取磁盘数据时，系统首先检查磁盘高速缓存